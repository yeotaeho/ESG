# Gateway ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

## ğŸ¯ í•µì‹¬ ê°œë… (ì´ˆë³´ììš©)

### Gatewayë€?
```
í´ë¼ì´ì–¸íŠ¸ â†’ Gateway (8080) â†’ ì‹¤ì œ ì„œë¹„ìŠ¤ë“¤
           â†‘
        ëª¨ë“  ìš”ì²­ì´ ì—¬ê¸°ë¥¼ ê±°ì³ê°
```

### ì™œ Gatewayë¥¼ ì‚¬ìš©í•˜ë‚˜?
1. **ë‹¨ì¼ ì§„ì…ì **: í•˜ë‚˜ì˜ í¬íŠ¸(8080)ë¡œ ëª¨ë“  API ì ‘ê·¼
2. **ë¼ìš°íŒ…**: ìš”ì²­ì„ ì ì ˆí•œ ì„œë¹„ìŠ¤ë¡œ ìë™ ì „ë‹¬
3. **ë³´ì•ˆ**: ì¸ì¦/ì¸ê°€ë¥¼ í•œ ê³³ì—ì„œ ì²˜ë¦¬
4. **ì„±ëŠ¥**: WebFluxë¡œ ë¹„ë™ê¸° ì²˜ë¦¬

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì„œë¹„ìŠ¤ ì‹œì‘

```bash
docker compose up -d
```

### 2. í™•ì¸

```bash
# Eureka ëŒ€ì‹œë³´ë“œ
http://localhost:8761

# ë“±ë¡ëœ ì„œë¹„ìŠ¤ í™•ì¸:
# - gateway-service
# - common-service  
# - user-service
```

### 3. API í˜¸ì¶œ

```bash
# User Service (Gatewayë¥¼ í†µí•´)
curl http://localhost:8080/api/users/test

# Common Service (Gatewayë¥¼ í†µí•´)
curl http://localhost:8080/api/common/test
```

## ğŸ“Š ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í´ë¼ì´ì–¸íŠ¸  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ http://localhost:8080/api/...
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Gateway       â”‚
â”‚   (WebFlux)     â”‚  â† ëª¨ë“  ìš”ì²­ì´ ì—¬ê¸°ë¥¼ ê±°ì¹¨
â”‚   Port: 8080    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚   Eureka   â”‚ â”‚  Common  â”‚ â”‚   User   â”‚
â”‚    8761    â”‚ â”‚   8082   â”‚ â”‚   8083   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ ì£¼ìš” í¬íŠ¸

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ì ‘ê·¼ ë°©ë²• |
|--------|------|----------|
| **Gateway** | 8080 | http://localhost:8080 |
| **Eureka** | 8761 | http://localhost:8761 |
| **Common** | 8082 | ì§ì ‘ ì ‘ê·¼ (ë¹„ê¶Œì¥) |
| **User** | 8083 | ì§ì ‘ ì ‘ê·¼ (ë¹„ê¶Œì¥) |

## ğŸ’¡ ì‚¬ìš© ì˜ˆì œ

### í”„ë¡ íŠ¸ì—”ë“œì—ì„œ API í˜¸ì¶œ

```javascript
// ì´ì „ (ì§ì ‘ í˜¸ì¶œ)
fetch('http://localhost:8082/api/common/data')

// í˜„ì¬ (Gatewayë¥¼ í†µí•œ í˜¸ì¶œ) â­
fetch('http://localhost:8080/api/common/data')
```

### ë¼ìš°íŒ… ê·œì¹™

```
ìš”ì²­: /api/users/**
  â†’ Gatewayê°€ user-serviceë¡œ ë¼ìš°íŒ…
  â†’ ì‹¤ì œ: http://user-service:8083/users/...

ìš”ì²­: /api/common/**
  â†’ Gatewayê°€ common-serviceë¡œ ë¼ìš°íŒ…
  â†’ ì‹¤ì œ: http://common-service:8082/common/...
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **íŒŒì¼ ì´ë¦„ ë³€ê²½**: `DiscoveryApplication.java` â†’ `GatewayApplication.java`ë¡œ ë³€ê²½ í•„ìš”
2. **í¬íŠ¸ ì¶©ëŒ**: Gatewayê°€ 8080ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ëŠ” 8082, 8083 ì‚¬ìš©
3. **CORS**: Gatewayì—ì„œ CORSê°€ ì„¤ì •ë˜ì–´ ìˆìŒ

## ğŸ› ë¬¸ì œ í•´ê²°

### Gatewayê°€ ì‹œì‘ë˜ì§€ ì•Šì„ ë•Œ

```bash
# ë¡œê·¸ í™•ì¸
docker logs gateway-service

# ì¬ì‹œì‘
docker compose restart gateway
```

### ë¼ìš°íŒ…ì´ ì•ˆ ë  ë•Œ

1. Eurekaì—ì„œ ì„œë¹„ìŠ¤ ë“±ë¡ í™•ì¸: http://localhost:8761
2. ì„œë¹„ìŠ¤ ì´ë¦„ í™•ì¸: `application.name`ì´ ì •í™•í•œì§€
3. ë¼ìš°íŒ… ê²½ë¡œ í™•ì¸: `/api/users/**` í˜•ì‹ì´ ë§ëŠ”ì§€

---

**ì¤€ë¹„ ì™„ë£Œ!** ì´ì œ Gatewayë¥¼ í†µí•´ APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ‰

